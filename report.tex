%-------------------------------------------------------------------------------
% BASIC DOCUMENT SETUP
%-------------------------------------------------------------------------------

\documentclass[12pt,a4paper]{article} % document type, page size, font size
\usepackage[margin=2.54cm, headheight=15pt]{geometry} % page margins
\usepackage[utf8]{inputenc} % input encoding
\usepackage[T1]{fontenc} % font encoding
\usepackage{parskip} % avoid indentation at beginning of paragraph
\usepackage[toc]{appendix} % for creating the appendix
\usepackage{comment} % environment for multi-line comments
\usepackage[table]{xcolor} % color definitions
\usepackage{amsmath} % maths

%-------------------------------------------------------------------------------
% TITLE & AUTHOR
%-------------------------------------------------------------------------------

\title{Title} % title
\newcommand{\subtitle}{Subtitle} % subtitle
\author{Firstname Lastname} % author

%-------------------------------------------------------------------------------
% HEADER & FOOTER
%-------------------------------------------------------------------------------

\usepackage{fancyhdr} % header and footer
\usepackage{lastpage} % page count

\makeatletter
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\@title} % top left
\fancyhead[R]{\@author} % top right
\fancyfoot[L]{\subtitle} % bottom left
\fancyfoot[R]{Page \thepage\ of \pageref{LastPage}} % bottom right
\renewcommand{\headrulewidth}{0.5pt} % rule below header
\renewcommand{\footrulewidth}{0.5pt} % rule below footer
\makeatother

%-------------------------------------------------------------------------------
% HYPHENATION RULES
%-------------------------------------------------------------------------------

\usepackage[british]{babel} % British English hyphenation rules
% \babelhyphenation{Java-Script} % example for a custom hypenation rule

%-------------------------------------------------------------------------------
% HYPERLINKS
%-------------------------------------------------------------------------------

\usepackage{hyperref} % links
\hypersetup{ % definition of different link colors
    colorlinks=true,   
	urlcolor=blue,
	linkcolor=black,
	citecolor=black
}

%-------------------------------------------------------------------------------
% CODE LISTINGS
%-------------------------------------------------------------------------------

\usepackage{listings} % create a list of code listings
\usepackage{minted} % code listings, optionally specify outputdir here
\usepackage[most]{tcolorbox} % box for code listings
\tcbuselibrary{minted,skins} % use minted in box for code listings

\newcommand{\programminglanguage}{TypeScript} % set main programming language here

\AtBeginDocument{ % configurations of code listings and its surrounding box
	\DeclareTCBListing[blend into=listings]{code}{ O{\programminglanguage} m m }{ % write default programming langauge in O{...}
		listing engine=minted,
		title={#2},
		label={#3},
		center title,
		listing only,
		breakable=true,
		enhanced=true,
		left=5mm,
		bottom=0mm,
		top=0mm,
		overlay={
			\begin{tcbclipinterior}
				\fill[black!15] (frame.south west) rectangle ([xshift=5mm]frame.north west);
			\end{tcbclipinterior}
		},
		colback=black!1,
		colframe=black!70,
		minted style=colorful,
		minted language=#1,
		minted options={
			linenos=true,
			numbersep=2.5mm,
			autogobble=true,
			breaklines=true,
			tabsize=2,
			fontsize=\small
		}
	}
}

%-------------------------------------------------------------------------------
% QUOTES
%-------------------------------------------------------------------------------

\usepackage{csquotes} % format quotes correctly

%-------------------------------------------------------------------------------
% BIBLIOGRAPHY
%-------------------------------------------------------------------------------

\usepackage[
	style=numeric,
	urldate=long,
	sorting=none,
	backend=biber]{biblatex} % configure references style
\addbibresource{./sources.bib} % specify references file

%-------------------------------------------------------------------------------
% IMAGES
%-------------------------------------------------------------------------------

\usepackage{graphicx} % import images
\graphicspath{ {./images/} } % root path for all images

%-------------------------------------------------------------------------------
% PLOTS
%-------------------------------------------------------------------------------

\usepackage{pgfplots}
\pgfplotsset{compat=1.17} % specify version
\usetikzlibrary{patterns} % patterns in bars
\usetikzlibrary{pgfplots.statistics} % for boxplots etc

%-------------------------------------------------------------------------------
% CAPTIONS
%-------------------------------------------------------------------------------

\usepackage{caption} % captions
\captionsetup{aboveskip=5pt, belowskip=0pt} % configure captions

%-------------------------------------------------------------------------------
% TABLE
%-------------------------------------------------------------------------------

\usepackage{tabularx} % table
\usepackage{multirow} % allow cells to spread across multiple rows/columns
\usepackage{rotating} % for table rotation

%-------------------------------------------------------------------------------
% TITLE PAGE
%-------------------------------------------------------------------------------

\begin{document}
%TC:ignore

\makeatletter
\begin{titlepage}
	\thispagestyle{empty}
	\centering
	\Large
	\vspace*{5\baselineskip}
	
	Electronics and Computer Science\\
	Faculty of Physical Sciences and Engineering\\
	University of Southampton
	\vspace*{\fill}

	{\Huge\bfseries\@title\\}
	\subtitle
	\vspace*{\fill}

	\@author\\
	\@date
	
	\vspace*{10\baselineskip}
\end{titlepage}
\makeatother

%-------------------------------------------------------------------------------
% ABSTRACT & STATEMENT OF ORIGINALITY
%-------------------------------------------------------------------------------

\section*{Abstract}
\addcontentsline{toc}{section}{Abstract}

The abstract.

\newpage
\section*{Statement of Originality}
\addcontentsline{toc}{section}{Statement of Originality}

I have read and understood the ECS Academic Integrity information and the University's Academic Integrity Guidance for Students.
I am aware that failure to act in accordance with the Regulations Governing Academic Integrity may lead to the imposition of penalties which, for the most serious cases, may include termination of programme.
I consent to the University copying and distributing any or all of my work in any form and using third parties (who may be based outside the EU/EEA) to verify whether my work contains plagiarised material, and for quality assurance purposes.

I have acknowledged all sources, and identified any content taken from elsewhere.
I have not used any resources produced by anyone else.
I did all the work myself, or with my allocated group, and have not helped anyone else.
The material in the report is genuine, and I have included all my data/code/designs.
I have not submitted any part of this work for another assessment.
My work did not involve human participants, their cells or data, or animals.

%-------------------------------------------------------------------------------
% TABLE OF CONTENTS
%-------------------------------------------------------------------------------

\newpage
\tableofcontents

%-------------------------------------------------------------------------------
% LIST OF FIGURES, TABLES AND CODE LISTINGS
%-------------------------------------------------------------------------------

\newpage
\renewcommand{\listfigurename}{Figures}
\listoffigures \thispagestyle{fancy}
\addcontentsline{toc}{section}{Figures}

\newpage
\renewcommand{\listtablename}{Tables}
\listoftables \thispagestyle{fancy}
\addcontentsline{toc}{subsection}{Tables}

\newpage
\renewcommand{\lstlistlistingname}{Code Listings}
\lstlistoflistings \thispagestyle{fancy}
\addcontentsline{toc}{section}{Code Listings}

%TC:endignore

%-------------------------------------------------------------------------------
% DOCUMENT BODY
%-------------------------------------------------------------------------------

\newpage
\section{Introduction}\label{sec:introduction}

Hello World~\cite{React}.
Please check out listing~\ref{listing:awesome-code}, table~\ref{tab:mytable} and figure~\ref{fig:latex-logo}!

\begin{code}{Awesome Code}{listing:awesome-code}
const cool = (): string => {
	return "cool";
}
\end{code}

\begin{code}[java]{Java Code}{listing:java-code}
List<String> names = new ArrayList<>();
\end{code}

\begin{table}[!ht]
	\begin{tabularx}{\textwidth}{|l|X|}
		\hline
		\textbf{Name} & \textbf{University} \\
		\hline
		Max & University of Southampton \\
		\hline
	\end{tabularx}
	\caption{Some Table}
	\label{tab:mytable}
\end{table}

\begin{figure}[!ht]
	\centering
	\includegraphics[width=0.5\textwidth]{latex.png}
	\caption{Latex Logo}
	\label{fig:latex-logo}
\end{figure}

\newpage
\section{Conclusion}\label{sec:conclusion}
Everything is awesome (see appendix~\ref{sec:first-appendix}).

%-------------------------------------------------------------------------------
% BIBLIOGRAPHY
%-------------------------------------------------------------------------------

%TC:ignore
\newpage
\printbibliography
\addcontentsline{toc}{section}{References}

%-------------------------------------------------------------------------------
% APENDICES
%-------------------------------------------------------------------------------

\newpage
\begin{appendices}
\addtocontents{toc}{\protect\setcounter{tocdepth}{2}}
\makeatletter
\addtocontents{toc}{%
\begingroup
\let\protect\l@section\protect\l@subsection % add sections as subsections to toc
}
\makeatother

\section{First Appendix}\label{sec:first-appendix}
Some Appendix

\newpage
\section{Second Appendix}\label{sec:second-appendix}
Another Appendix

\addtocontents{toc}{\endgroup}
\end{appendices}

%TC:endignore
\end{document}
